function updateViewportDimensions() {
    var w = window, d = document, e = d.documentElement, g = d.getElementsByTagName("body")[0], x = w.innerWidth || e.clientWidth || g.clientWidth, y = w.innerHeight || e.clientHeight || g.clientHeight;
    return {
        width: x,
        height: y
    };
}

var viewport = updateViewportDimensions();

var waitForFinalEvent = function() {
    var timers = {};
    return function(callback, ms, uniqueId) {
        if (!uniqueId) {
            uniqueId = "Don't call this twice without a uniqueId";
        }
        if (timers[uniqueId]) {
            clearTimeout(timers[uniqueId]);
        }
        timers[uniqueId] = setTimeout(callback, ms);
    };
}();

var timeToWaitForLast = 100;

(function(window) {
    var $window = jQuery(window);
    function init() {
        breakpoint();
        reSizeVideoWrapper();
    }
    function reSizeVideoWrapper() {
        if (window.breakpoint != "mobile") {
            adjustVideoPositioning(".homepage-hero-video", "video");
        } else {
            adjustVideoPositioning(".homepage-hero", "img");
        }
    }
    function adjustVideoPositioning(element, type) {
        var windowW = $window.width();
        var windowH = $window.height();
        var mediaAspect = 16 / 9;
        var windowAspect = windowW / windowH;
        if (windowAspect < mediaAspect) {
            jQuery(element).find(type).width(windowH * mediaAspect).height(windowH);
            jQuery(element).css("top", 0).css("left", -(windowH * mediaAspect - windowW) / 2).css("height", windowH);
            jQuery(element + "_html5_api").css("width", windowH * mediaAspect);
            jQuery(element + "_flash_api").css("width", windowH * mediaAspect).css("height", windowH);
        } else {
            jQuery(element).find(type).width(windowW).height(windowW / mediaAspect);
            jQuery(element).css("top", -(windowW / mediaAspect - windowH) / 2).css("left", 0).css("height", windowW / mediaAspect);
            jQuery(element + "_html5_api").css("width", "100%");
            jQuery(element + "_flash_api").css("width", windowW).css("height", windowW / mediaAspect);
        }
    }
    function breakpoint() {
        var breakpoint;
        var breakpoint_refreshValue;
        breakpoint_refreshValue = function() {
            window.breakpoint = window.getComputedStyle(document.querySelector("html"), ":before").getPropertyValue("content").replace(/\"/g, "");
        };
        jQuery(window).resize(function() {
            breakpoint_refreshValue();
        }).resize();
    }
    window.Application = {
        init: init
    };
})(window);

Application.init();